package com.example.demo.controller;

import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestMapping;

import com.example.demo.model.Dept;
import com.example.demo.service.DeptService;

import lombok.RequiredArgsConstructor;
import oracle.jdbc.proxy.annotation.Post;

@Controller
@RequiredArgsConstructor
@RequestMapping("/dept")
public class DeptController {

	private final DeptService deptService;
	
	@GetMapping
	public String list(Model model) {
		model.addAttribute("list", deptService.findAll());
		
		return "dept/list";
	}
// newdept를 보내면 자동매핑되서 값이 있으면 값이 자동으로 세팅됨
	@GetMapping("/add") // 화면 
	public String addForm(Model model) {
		model.addAttribute("dept",new Dept());
		return "dept/add";
	}
	
	@PostMapping("/add")
	public String add(Dept dept) {
		deptService.save(dept);
		return "redirect:/dept";
		
	}
}
